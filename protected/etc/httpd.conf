Listen 80
ServerName 192.168.1.11
ServerRoot /usr/local/httpd-ninja
ServerAdmin xu.yongjin@sh.adways.net
ServerTokens ProductOnly
PidFile logs/httpd-ninja.pid

User daemon
Group daemon
#详细
Timeout 30
KeepAlive Off
MaxKeepAliveRequests 100
KeepAliveTimeout 1

StartServers 10
MinSpareServers 15
MaxSpareServers 20
MaxClients  150
MaxRequestsPerChild 1000

DocumentRoot /var/www/ninja/Mars
DefaultType text/plain
LoadModule php5_module        modules/libphp5.so
LoadModule deflate_module     modules/mod_deflate.so

RewriteEngine on
RewriteRule ^.*index.php/building/index/t/1/.*$  http://192.168.1.11/index.php?r=building/index&t=1 [R=301,L]
RewriteRule ^.*index.php/player/lord/.*$  http://192.168.1.11/index.php?r=player/lord [R=301,L]
RewriteRule ^.*index.php/player/index/.*$  http://192.168.1.11/index.php?r=player/index [R=301,L]
RewriteRule ^.*index.php/building/index/t/2.*$  http://192.168.1.11/index.php?r=building/index&t=2 [R=301,L]
RewriteRule ^.*index.php/player/market/.*$  http://192.168.1.11/index.php?r=player/market [R=301,L]
RewriteRule ^.*index.php/building/index/t/8/.*$  http://192.168.1.11/index.php?r=building/index&t=8 [R=301,L]
RewriteRule ^.*index.php/player/expedition/.*$  http://192.168.1.11/index.php?r=player/expedition [R=301,L]
RewriteRule ^.*index.php/epic/index/.*$  http://192.168.1.11/index.php?r=epic/index [R=301,L]
RewriteRule ^.*index.php/building/index/t/9/.*$  http://192.168.1.11/index.php?r=building/index&t=9 [R=301,L]
RewriteRule ^.*/index.php/player/storage/.*$  http://192.168.1.11/index.php?r=player/storage [R=301,L]
RewriteRule ^.*index.php/player/AllInformation/tab_id/3/.*$  http://192.168.1.11/index.php?r=player/AllInformation&tab_id=3 [R=301,L]
RewriteRule ^.*index.php/app/itunesPurchaseCallback/uid/(.*)/tid/(.*)/tm/(.*)/sig/(.*)$ http://192.168.1.11/index.php?r=app/itunesPurchaseCallback&uid=$1&tid=$2&tm=$3&sig=$4 [R=301,P]
RewriteRule ^.*index.php/app/itunesProduct$ http://192.168.1.11/index.php?r=app/itunesProduct [R=301,L]
RewriteRule ^.*index.php/help/others/.*$  http://192.168.1.11/index.php?r=help/others [R=301,L]
RewriteRule ^.*totwtr/sid/(.*)$  http://192.168.1.11/totwtr.php?sid=$1 [R=301,L]
RewriteRule ^.*index.php/app/twtrConfig/sid/(.*) http://192.168.1.11/index.php?r=app/twtrConfig&sid=$1 [R=301,L]
RewriteRule ^.*/index.php/app/notification/sid/(.*)/lang/(.*)$ http://192.168.1.11/index.php?r=app/notification&sid=$1&lang=$2 [R=301,P]
RewriteRule ^.*/index.php/app/notification/sid/(.*)$ http://192.168.1.11/index.php?r=app/notification&sid=$1 [R=301,P]
RewriteRule ^.*/index.php/player/selectFeeType$ http://192.168.1.11/index.php?r=player/selectFeeType [R=301,L]

TypesConfig conf/mime.types
AddType application/x-compress .Z
AddType application/x-gzip .gz .tgz
AddType text/cache-manifest .manifest
AddType application/x-httpd-php .php .phtml
AddType application/x-httpd-php-source .phps

<Ifmodule mod_deflate.c>
DeflateCompressionLevel 6
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE text/javascript
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/atom_xml
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE application/x-httpd-php
AddOutputFilterByType DEFLATE image/svg+xml
AddOutputFilterByType DEFLATE image/jpeg
AddOutputFilterByType DEFLATE image/gif
AddOutputFilterByType DEFLATE image/png
</Ifmodule>

SetOutputFilter DEFLATE

<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
</IfModule>
#SetEnvIf Request_URI "\/monitoring/$" no_log
SetEnvIf Remote_Addr 172.16.250. no_log
LogLevel warn
ErrorLog /var/log/httpd/ninja_error_log
CustomLog /var/log/httpd/ninja_access_log combined env=!no_log
<IfModule dir_module>
    DirectoryIndex index.php
</IfModule>
#<FilesMatch "^\.ht">
#    Order allow,deny
#    Deny from all
#    Satisfy All
#</FilesMatch>
<Directory "/var/www/ninja/Mars">
    AllowOverride None
    Options None
    Order deny,allow
    Allow from all
</Directory>

<Directory "/var/www/ninaj/Mars/protected">
  Order allow,deny
  Deny from all
</Directory>


<FilesMatch "^PARAM.TXT">
    Order allow,deny
    Deny from all
</FilesMatch>

<FilesMatch "^pagetrbl.gif">
    Order allow,deny
    Deny from all
</FilesMatch>
<FilesMatch "^apachectl_ninja">
    Order allow,deny
    Deny from all
</FilesMatch>
<FilesMatch "^apachectl_static">
    Order allow,deny
    Deny from all
</FilesMatch>

<DirectoryMatch "\.svn">
  Order allow,deny
  Deny from all
</DirectoryMatch>



